<!DOCTYPE html>
<html>
<head>
	<title>Мастерграунд</title>
	<meta charset="utf-8">
        <link rel="stylesheet" type="text/css" media="all" href="swiperDemo.css" />
        <link rel="stylesheet" href="jquery-ui.css" />
        <link rel="stylesheet" href="db.css" />
        <script src="jquery-2.0.3.min.js"></script>
        <script src="jquery-ui.js"></script>
        <script src="jquery.tmpl.js" type="text/javascript"></script>
        <script src="db.js" type="text/javascript"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

        <style>
            .toggler { height: 100%; position: absolute; top:0; left: 0; padding: 0.4em;}
            #button { padding: .5em 1em; text-decoration: none; }
            #effect { width: 240px; height: 100%; position: absolute; }
            #effect h3 { margin: 0; padding: 0.4em; text-align: center; }
            .ui-effects-transfer { border: 2px dotted gray; }
            #draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
            #droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
        </style>
       
  <script>
  $(function() {
    $( "#resizable" ).resizable();
  });
  </script>        
<script>
  $(function() {
    // run the currently selected effect
    function runEffect() {
      // get effect type from
      var selectedEffect = $( "#effectTypes" ).val();
      if (selectedEffect==="drop") {
          selectedEffect="slide";
      } else {
          selectedEffect="drop";
      }
      $( "#effectTypes" ).val(selectedEffect);
      
      // most effect types need no options passed by default
      var options = {};
      // some effects have required parameters
     // if ( selectedEffect === "scale" ) {
     //   options = { percent: 0 };
     // } else if ( selectedEffect === "transfer" ) {
     //   options = { to: "#button", className: "ui-effects-transfer" };
     // } else if ( selectedEffect === "size" ) {
     //   options = { to: { width: 200, height: 100 } };
     // }
 
      // run the effect
      $( "#effect" ).effect( selectedEffect, options, 500, callback );
    };
 
    // callback function to bring a hidden box back
    function callback() {
    //  setTimeout(function() {
    //    $( "#effect" ).removeAttr( "style" ).hide().fadeIn();
    //  }, 1000 );
    };
 
    // set effect from select menu value
    $( "#button" ).click(function() {
      runEffect();
      return false;
    });
  });
  </script>      
  <!--
  <style>
  #draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
  #droppable { position: fixed; left: 0; top:0; width: 150px; height: 100%; float: left; }
  </style>
  !-->
  <script>
  $(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
      }
    });
  });
  </script>  

  <style>
  .column { width: 170px; float: left; padding-bottom: 100px; }
  .portlet { margin: 0 1em 1em 0; }
  .portlet-header { margin: 0.3em; padding-bottom: 4px; padding-left: 0.2em; }
  .portlet-header .ui-icon { float: right; }
  .portlet-content { padding: 0.4em; }
  .ui-sortable-placeholder { border: 1px dotted black; visibility: visible !important; height: 50px !important; }
  .ui-sortable-placeholder * { visibility: hidden; }
  </style>
  <script>
  $(function() {
    $( ".column" ).sortable({
      connectWith: ".column"
    });
 
    $( ".portlet" ).addClass( "ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" )
      .find( ".portlet-header" )
        .addClass( "ui-widget-header ui-corner-all" )
        .prepend( "<span class='ui-icon ui-icon-minusthick'></span>")
        .end()
      .find( ".portlet-content" );
 
    $( ".portlet-header .ui-icon" ).click(function() {
      $( this ).toggleClass( "ui-icon-minusthick" ).toggleClass( "ui-icon-plusthick" );
      $( this ).parents( ".portlet:first" ).find( ".portlet-content" ).toggle();
    });
 
    $( ".column" ).disableSelection();
  });
  </script>  

  <script id="dataTmpl" type="text/x-jquery-tmpl">
      
  </script>
  
  <script type="text/javascript">
      $(document).ready(function() {
          $('<button class="ui-state-default ui-corner-all">Обновить</button>').appendTo(".instructions")
                  .click(function(e){
          $.get("mydata.json", function(data) {
              
          });
                  });
      });
  </script>
</head>
<body>
        <div class="instructions">
            
            <a href="#" id="button" class="ui-state-default ui-corner-all">Корзина</a>    
            <a id="webmsg">Направьте камеру на себя и листайте каталог движением руки влево/вправо.</a>
	</div>

    <div class="content">
            
            <span class="control left">&lt;</span>
		<div class="book">
			<div class="one page">
				<div class="pageContents">
                                        <img src="catalog/page1.png" class="content" />
				</div>
			</div>
			<div class="two page">
				<div class="pageContents">
					<img src="catalog/page2.png" class="content" />
				</div>
			</div>
                    <div class="three page">
				<div class="pageContents">
                                    <img src="catalog/page3.png" class="content" />
				</div>
			</div>
			<div class="four page">
				<div class="pageContents">
                                    <img src="catalog/page4.png" class="content" />
				</div>
			</div>
			<div class="five page">
				<div class="pageContents">
                		    <img src="catalog/page5.png" class="content" />
				</div>
			</div>
			<div class="six page">
				<div class="pageContents">
                                    <img src="catalog/page6.png" class="content" />
				</div>
			</div>
			<div class="seven page">
				<div class="pageContents">
                                    <h1>Мастерграунд - 2013</h1>
				</div>
			</div>
			<div class="eight page">
				<div class="pageContents">
                                    <h1>Как сделать заказ</h1>
                                    <a class="product" href="#" data-pname="Удобрение" data-pcol="1" data-pid="1" data-size="банка">Удобрение - в банках</a><br>
                                    <a class="product" href="#" data-pname="Торф" data-pcol="1" data-pid="1" data-size="мешок">Торф - в мешках</a><br>
                                    <a class="product" href="#" data-pname="Земля черная" data-pcol="1" data-pid="1" data-size="палета">Земля черная - в палетах</a><br>
				</div>
			</div>
		</div>
		<span class="control right" >&gt;</span>
	</div>

    <!--
<div id="draggable" class="ui-widget-content">
  <p>Drag me to my target</p>
</div>

    
<div id="droppable" class="ui-widget-header">
  <p>Drop here</p>
</div>        
!-->
    
    <div class="toggler ui-widget-content">
  <div id="effect" class="ui-widget-content ui-corner-all">
    <h3 class="ui-widget-header ui-corner-all">Корзина</h3>
    <select name="effects" id="effectTypes" hidden>
  <option value="blind">Blind</option>
  <option value="bounce">Bounce</option>
  <option value="clip">Clip</option>
  <option value="drop">Drop</option>
  <option value="explode">Explode</option>
  <option value="fade">Fade</option>
  <option value="fold">Fold</option>
  <option value="highlight">Highlight</option>
  <option value="puff">Puff</option>
  <option value="pulsate">Pulsate</option>
  <option value="scale">Scale</option>
  <option value="shake">Shake</option>
  <option value="size">Size</option>
  <option value="slide">Slide</option>
  <option value="transfer">Transfer</option>
</select>
    <div id="accordion" class="ui-widget-content ui-corner-all">
  
        <h3>Заказы</h3>
        <div><div><button id="OrderBtn">Заказать</button><button id="OrderClearBtn">Отменить</button></div><div id="Order" class="column"></div></div>
  
        <h3>Заказано</h3>
  
        <div><div><button id="OrderedBtn" hidden="">Подтвердить</button></div><div id="Ordered" class="column"></div></div>
  <h3>Избранное</h3>
  
  <div id="Favorites">
    <p>
        Избранные товары:
    </p>
    <ul>
      <li>Земля</li>
      <li>Удобрение</li>
      <li>Тяпка</li>
    </ul>
    <button onclick="(function(){$(parent).remove();});">-</button>
  </div>
  <h3>Параметры</h3>
  <div id="Settings">
    <p>
        <b>Имя:</b>Илья<br>
        <b>Отчество:</b>Александрович<br>
        <b>Фамилия:</b>Юхновский<br>
        <b>Логин:</b>ilya<br>
        <b>Тел:</b>89027800807<br>
        <b>Город:</b>Нижний Новгород
    </p>
  </div>
</div>        

  </div>
</div>
    
  <script>
  $(function() {
    $( "#accordion" ).accordion({
      heightStyle: "fill"
    });
  });
  </script>
    
	<script src="modernizr-2.6.2.js"></script>
	<script src="webcam-swiper-0.1.js"></script>
	<script src="demo.js"></script>
       
    <script>
      $('#ProductClearBtn').click( function(){
          $(this).parent().parent().remove();
      });
  </script>
  
  <script>
  $(function() {
    $(".product").click(function() {
        //data-pname="Земля черная" data-pcol="1" data-pid="1" data-size="мешочек"
            var prod_name=$(this).attr("data-pname");
            var prod_pcol=$(this).attr("data-pcol");
            var prod_size=$(this).attr("data-size");
            var s='<div class="portlet product-portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all">\n\
                    <div class="portlet-header ui-widget-header ui-corner-all">\n\
                    <span class="ui-icon ui-icon-minusthick ordered-prod-name"></span>'+prod_name+'</div>\n\
                    <div class="portlet-content"><p><label for="spinner">'+prod_size+':</label><input id="spinner" name="value" style="width: 50px;" value="'+prod_pcol+'" width="100"/></p>\n\
                    </div>\n\
                  </div>';
            $(s).appendTo("#Order");
            
    $( ".column" ).sortable({
      connectWith: ".column"
    });
 
    $( ".portlet" ).find( ".portlet-header span" ).remove('span');
            
    $( ".portlet" ).addClass( "ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" )
      .find( ".portlet-header" )
        .addClass( "ui-widget-header ui-corner-all" )
        .prepend( "<span class='ui-icon ui-icon-minusthick'></span>")
        .end()
      .find( ".portlet-content" );
 
    $( ".portlet-header .ui-icon" ).click(function() {
      $( this ).toggleClass( "ui-icon-minusthick" ).toggleClass( "ui-icon-plusthick" );
      $( this ).parents( ".portlet:first" ).find( ".portlet-content" ).toggle();
    });
 
    $( ".column" ).disableSelection();
    
    });
  });      
  </script> 
  <script>
      $('#OrderBtn').click( function(){
          $('.product-portlet').removeClass('product-portlet').addClass('product-ordered-portlet').replaceAll('#Ordered').end();
          $('#OrderedBtn').show();
      });
  </script>
  
  <script>
      $('#OrderClearBtn').click( function(){
          $('.product-portlet').remove('.product-portlet');
      });
  </script>

  <div id="dialog" title="Basic dialog" hidden="">
    <p>Подтвердить заказ</p>
    <form method="post" action = "http://interactivefishing.tv:9999/order">
        <table id="ordered-list">
            <td id="dialog-product-name"></td>
            <td id="dialog-product-col"></td>
        </table>
        <div id="buttonDiv">
            <button type="submit">Отправить</button>
        </div>
    </form>
  </div>
 <script>
  $('#dialog').open( function() {
      alert("dialog open");
     $('#dialog-product-name').empty();
     $('#dialog-product-col').empty();
     $('#Ordered div div ordered-prod-name').each(function(){
         $('<tr>'+ $(this).value() +'</tr>').append('dialog-product-name');
     });

    $('#Ordered div div #spinner').each(function(){
         $('<tr>'+ $(this).value() +'</tr>').append('dialog-product-col');
     });
  });
 </script>
  <script>
      $('#OrderedBtn').click( function(){
          
              $( "#dialog" ).dialog();
              $('.product-ordered-portlet').remove('.product-ordered-portlet');
              $(this).hide();
      });
  </script>
</body>
</html>